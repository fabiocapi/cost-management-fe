<div class="container">
    <div class="col-md-6 offset-md-3 mt-4">
        <h2>Registration</h2>
        <form #form="ngForm" (ngSubmit)="registerUser()">
            <small class="text-danger">{{msg}}</small>
            <div class="form-group mt-2">
            <label for="email">Email</label>
            <input type="email" 
                class="form-control" 
                placeholder="inserisci Email" 
                name="email" 
                [(ngModel)]="user.email" 
                required
                pattern="^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$"
                #email="ngModel"
                [class.is-invalid]="email.invalid && email.touched">
            <div *ngIf="email.errors && (email.invalid && email.touched)">
                <small class="text-danger" *ngIf="email.errors.required">Email non può essere vuoto</small>
                <small class="text-danger" *ngIf="email.errors.pattern">inserire Email valida</small>
            </div>
            </div>
            <div class="form-group mt-2">
            <label for="password">Password</label>
            <input type="password" 
                class="form-control" 
                placeholder="inserisci Password"
                name="password" 
                [(ngModel)]="user.password"
                required
                #password="ngModel"
                [class.is-invalid]="password.invalid && password.touched">
            <small class="text-danger"
                [class.d-none]="password.valid || password.untouched">Password non può essere vuoto</small>
            </div>
            <div class="form-group mt-2">
            <label for="password">Conferma Password</label>
            <input type="password" 
                class="form-control" 
                placeholder="inserisci conferma Password"
                name="cpassword"
                required
                #cpassword="ngModel"
                (ngModel)="user.password"
                [class.is-invalid]="cpassword.invalid && cpassword.touched">
                <small class="text-danger" [class.d-none]="(cpassword.valid || cpassword.untouched)">Conferma Password non può essere vuoto</small>
                <small class="text-danger" [class.d-none]="(cpassword.value == password.value || cpassword.invalid || cpassword.untouched)">Conferma Password e Password devono essere uguali</small>
            <!--<small class="text-danger"
                [class.d-none]="cpassword.valid || cpassword.untouched">Conferma Password non può essere vuoto</small>
            -->
            </div>
            <button [disabled]="form.form.invalid" type="submit" class="btn btn-primary mt-3">Register</button>
        </form>
        <small class="float-right" [routerLink]="['']">Login</small>
    </div>
</div>
